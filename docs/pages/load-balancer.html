<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Load balancer | The System Design Primer</title>
<meta name="generator" content="Jekyll v3.9.3">
<meta property="og:title" content="Load balancer">
<meta property="og:locale" content="en_US">
<meta name="description" content="Learn how to design large-scale systems. Prep for the system design interview.">
<meta property="og:description" content="Learn how to design large-scale systems. Prep for the system design interview.">
<link rel="canonical" href="https://phucnguyen81.github.io/system-design-primer/pages/load-balancer.html">
<meta property="og:url" content="https://phucnguyen81.github.io/system-design-primer/pages/load-balancer.html">
<meta property="og:site_name" content="The System Design Primer">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Load balancer">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Learn how to design large-scale systems. Prep for the system design interview.","headline":"Load balancer","url":"https://phucnguyen81.github.io/system-design-primer/pages/load-balancer.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/system-design-primer/assets/main.css">
<link type="application/atom+xml" rel="alternate" href="https://phucnguyen81.github.io/system-design-primer/feed.xml" title="The System Design Primer">
<link rel="shortcut icon" type="image/x-icon" href="/system-design-primer/assets/favicon.ico">
<link rel="stylesheet" type="text/css" href="/system-design-primer/assets/css/custom-styles.css">
<link rel="stylesheet" type="text/css" href="/system-design-primer/assets/css/custom-mermaid.css">
</head>
<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/system-design-primer/">The System Design Primer</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
<a class="page-link" href="/system-design-primer/about/">About</a><a class="page-link" href="/system-design-primer/pages/domain-name-system.html">Domain name system</a><a class="page-link" href="/system-design-primer/">The System Design Primer</a><a class="page-link" href="/system-design-primer/images/">Original Images</a><a class="page-link" href="/system-design-primer/pages/key-value-store.html">Key value store</a><a class="page-link" href="/system-design-primer/pages/load-balancer.html">Load balancer</a><a class="page-link" href="/system-design-primer/pages/reverse-proxy-web-server.html">Reverse Proxy (web server)</a><a class="page-link" href="/system-design-primer/pages/sql-or-nosql.html">SQL or NoSQL</a><a class="page-link" href="/system-design-primer/solutions/system_design/mint/">Design Mint.com</a><a class="page-link" href="/system-design-primer/solutions/system_design/pastebin/">Design Pastebin.com</a><a class="page-link" href="/system-design-primer/solutions/system_design/query_cache/">Design a key-value cache to save the results of the most recent web server queries</a><a class="page-link" href="/system-design-primer/solutions/system_design/sales_rank/">Design Amazonâ€™s sales rank by category feature</a><a class="page-link" href="/system-design-primer/solutions/system_design/scaling_aws/">Design a system that scales to millions of users on AWS</a><a class="page-link" href="/system-design-primer/solutions/system_design/social_graph/">Design the data structures for a social network</a><a class="page-link" href="/system-design-primer/solutions/system_design/twitter/">Design the Twitter timeline and search</a><a class="page-link" href="/system-design-primer/solutions/system_design/web_crawler/">Design a web crawler</a>
</div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Load balancer</h1>
  </header>

  <div class="post-content">
    <p>See <a href="/images/h81n9iK.png">the original load balancer diagram</a>
and the original blog on
<a href="http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html">Scalable system design patterns</a>.</p>

<svg class="mermaid" id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 336.921875px;" viewbox="-8 -8 336.921875 218" role="graphics-document document" aria-roledescription="flowchart-v2" xmlns:xlink="http://www.w3.org/1999/xlink"><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:2px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg .cluster-label text{fill:#333;}#mermaid-svg .cluster-label span,#mermaid-svg p{color:#333;}#mermaid-svg .label text,#mermaid-svg span,#mermaid-svg p{fill:#333;color:#333;}#mermaid-svg .node rect,#mermaid-svg .node circle,#mermaid-svg .node ellipse,#mermaid-svg .node polygon,#mermaid-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg .flowchart-label text{text-anchor:middle;}#mermaid-svg .node .label{text-align:center;}#mermaid-svg .node.clickable{cursor:pointer;}#mermaid-svg .arrowheadPath{fill:#333333;}#mermaid-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg .cluster text{fill:#333;}#mermaid-svg .cluster span,#mermaid-svg p{color:#333;}#mermaid-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g><marker id="flowchart-pointEnd" class="marker flowchart" viewbox="0 0 10 10" refx="10" refy="5" markerunits="userSpaceOnUse" markerwidth="12" markerheight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewbox="0 0 10 10" refx="0" refy="5" markerunits="userSpaceOnUse" markerwidth="12" markerheight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewbox="0 0 10 10" refx="11" refy="5" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewbox="0 0 10 10" refx="-1" refy="5" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewbox="0 0 11 11" refx="12" refy="5.2" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewbox="0 0 11 11" refx="-1" refy="5.2" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M160.4609375,34L160.4609375,38.166666666666664C160.4609375,42.333333333333336,160.4609375,50.666666666666664,160.4609375,59C160.4609375,67.33333333333333,160.4609375,75.66666666666667,160.4609375,79.83333333333333L160.4609375,84" id="L-Client-Dispatcher-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Client LE-Dispatcher" style="fill:none;" marker-start="url(#flowchart-pointStart)" marker-end="url(#flowchart-pointEnd)"></path><path d="M114.8984375,116.47731580942752L101.88541666666667,120.89776317452294C88.87239583333333,125.31821053961835,62.846354166666664,134.15910526980917,49.833333333333336,142.74621930157124C36.8203125,151.33333333333334,36.8203125,159.66666666666666,36.8203125,163.83333333333334L36.8203125,168" id="L-Dispatcher-Server1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Dispatcher LE-Server1" style="fill:none;" marker-start="url(#flowchart-pointStart)" marker-end="url(#flowchart-pointEnd)"></path><path d="M160.4609375,118L160.4609375,122.16666666666667C160.4609375,126.33333333333333,160.4609375,134.66666666666666,160.4609375,143C160.4609375,151.33333333333334,160.4609375,159.66666666666666,160.4609375,163.83333333333334L160.4609375,168" id="L-Dispatcher-Server2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Dispatcher LE-Server2" style="fill:none;" marker-start="url(#flowchart-pointStart)" marker-end="url(#flowchart-pointEnd)"></path><path d="M206.0234375,116.47731580942752L219.03645833333334,120.89776317452294C232.04947916666666,125.31821053961835,258.0755208333333,134.15910526980917,271.0885416666667,142.74621930157124C284.1015625,151.33333333333334,284.1015625,159.66666666666666,284.1015625,163.83333333333334L284.1015625,168" id="L-Dispatcher-Server3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Dispatcher LE-Server3" style="fill:none;" marker-start="url(#flowchart-pointStart)" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g class="node default default flowchart-label" id="flowchart-Client-0" transform="translate(160.4609375, 17)"><rect class="basic label-container" style="fill:LawnGreen;" rx="0" ry="0" x="-28.8359375" y="-17" width="57.671875" height="34"></rect><g class="label" style="" transform="translate(-21.3359375, -9.5)"><rect></rect><foreignobject width="42.671875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Client</span></div></foreignobject></g></g><g class="node default default flowchart-label" id="flowchart-Dispatcher-1" transform="translate(160.4609375, 101)"><rect class="basic label-container" style="fill:Khaki;" rx="0" ry="0" x="-45.5625" y="-17" width="91.125" height="34"></rect><g class="label" style="" transform="translate(-38.0625, -9.5)"><rect></rect><foreignobject width="76.125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Dispatcher</span></div></foreignobject></g></g><g class="node default default flowchart-label" id="flowchart-Server1-3" transform="translate(36.8203125, 185)"><rect class="basic label-container" style="fill:LightBlue;" rx="0" ry="0" x="-36.8203125" y="-17" width="73.640625" height="34"></rect><g class="label" style="" transform="translate(-29.3203125, -9.5)"><rect></rect><foreignobject width="58.640625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Server 1</span></div></foreignobject></g></g><g class="node default default flowchart-label" id="flowchart-Server2-5" transform="translate(160.4609375, 185)"><rect class="basic label-container" style="fill:LightBlue;" rx="0" ry="0" x="-36.8203125" y="-17" width="73.640625" height="34"></rect><g class="label" style="" transform="translate(-29.3203125, -9.5)"><rect></rect><foreignobject width="58.640625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Server 2</span></div></foreignobject></g></g><g class="node default default flowchart-label" id="flowchart-Server3-7" transform="translate(284.1015625, 185)"><rect class="basic label-container" style="fill:LightBlue;" rx="0" ry="0" x="-36.8203125" y="-17" width="73.640625" height="34"></rect><g class="label" style="" transform="translate(-29.3203125, -9.5)"><rect></rect><foreignobject width="58.640625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Server 3</span></div></foreignobject></g></g></g></g></g><style>@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css");</style></svg>

<svg class="mermaid" id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 634.78125px;" viewbox="-8 -8 634.78125 237" role="graphics-document document" aria-roledescription="flowchart-v2" xmlns:xlink="http://www.w3.org/1999/xlink"><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:2px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg .cluster-label text{fill:#333;}#mermaid-svg .cluster-label span,#mermaid-svg p{color:#333;}#mermaid-svg .label text,#mermaid-svg span,#mermaid-svg p{fill:#333;color:#333;}#mermaid-svg .node rect,#mermaid-svg .node circle,#mermaid-svg .node ellipse,#mermaid-svg .node polygon,#mermaid-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg .flowchart-label text{text-anchor:middle;}#mermaid-svg .node .label{text-align:center;}#mermaid-svg .node.clickable{cursor:pointer;}#mermaid-svg .arrowheadPath{fill:#333333;}#mermaid-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg .cluster text{fill:#333;}#mermaid-svg .cluster span,#mermaid-svg p{color:#333;}#mermaid-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style>
<g><marker id="flowchart-pointEnd" class="marker flowchart" viewbox="0 0 10 10" refx="10" refy="5" markerunits="userSpaceOnUse" markerwidth="12" markerheight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewbox="0 0 10 10" refx="0" refy="5" markerunits="userSpaceOnUse" markerwidth="12" markerheight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewbox="0 0 10 10" refx="11" refy="5" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewbox="0 0 10 10" refx="-1" refy="5" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewbox="0 0 11 11" refx="12" refy="5.2" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewbox="0 0 11 11" refx="-1" refy="5.2" markerunits="userSpaceOnUse" markerwidth="11" markerheight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path d="M156.96374393203882,34L135.57395327669903,39.75C114.18416262135922,45.5,71.4045813106796,57,71.4045813106796,68.5C71.4045813106796,80,114.18416262135922,91.5,135.57395327669903,97.25L156.96374393203882,103" id="L-1-2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-1 LE-2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M187.12636529126212,34L175.93863774271844,39.75C164.75091019417474,45.5,142.37545509708738,57,142.37545509708738,68.5C142.37545509708738,80,164.75091019417474,91.5,175.93863774271844,97.25L187.12636529126212,103" id="L-1-2-1" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-1 LE-2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M220.203125,34L220.203125,39.75C220.203125,45.5,220.203125,57,220.203125,68.5C220.203125,80,220.203125,91.5,220.203125,97.25L220.203125,103" id="L-1-2-2" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-1 LE-2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M265.3567961165048,34L280.62936134708735,39.75C295.9019265776699,45.5,326.44705703883494,57,326.447057038835,68.5C326.44705703883494,80,295.9019265776699,91.5,280.62936134708735,97.25L265.3567961165048,103" id="L-1-2-3" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-1 LE-2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M317.9296875,32.85912459072893L354.5338541666667,38.79927049227411C391.1380208333333,44.73941639381928,464.3463541666667,56.61970819690964,465.5180648260518,68.30985409845482C466.6897754854369,80,395.8248634708738,91.5,360.39240746359224,97.25L324.9599514563107,103" id="L-1-2-4" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-1 LE-2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M220.203125,137L220.203125,141.16666666666666C220.203125,145.33333333333334,220.203125,153.66666666666666,220.203125,162C220.203125,170.33333333333334,220.203125,178.66666666666666,220.203125,182.83333333333334L220.203125,187" id="L-2-3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-2 LE-3" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(28.625, 68.5)"><g class="label" transform="translate(-28.625, -9.5)"><foreignobject width="57.25" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Random</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(120, 68.5)"><g class="label" transform="translate(-42.75, -9.5)"><foreignobject width="85.5" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Round robin</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(220.203125, 68.5)"><g class="label" transform="translate(-37.453125, -9.5)"><foreignobject width="74.90625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Least busy</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(356.9921875, 68.5)"><g class="label" transform="translate(-79.3359375, -9.5)"><foreignobject width="158.671875" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">Sticky session/cookies</span></div></foreignobject></g></g><g class="edgeLabel" transform="translate(537.5546875, 68.5)"><g class="label" transform="translate(-81.2265625, -9.5)"><foreignobject width="162.453125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">By request parameters</span></div></foreignobject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignobject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignobject></g></g></g><g class="nodes"><g class="node default default flowchart-label" id="flowchart-1-0" transform="translate(220.203125, 17)"><rect class="basic label-container" style="" rx="0" ry="0" x="-97.7265625" y="-17" width="195.453125" height="34"></rect><g class="label" style="" transform="translate(-90.2265625, -9.5)"><rect></rect><foreignobject width="180.453125" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Dispatcher picks a Sorker</span></div></foreignobject></g></g><g class="node default default flowchart-label" id="flowchart-2-2" transform="translate(220.203125, 120)"><rect class="basic label-container" style="" rx="0" ry="0" x="-127.75" y="-17" width="255.5" height="34"></rect><g class="label" style="" transform="translate(-120.25, -9.5)"><rect></rect><foreignobject width="240.5" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Dispatcher waits for the response</span></div></foreignobject></g></g><g class="node default default flowchart-label" id="flowchart-3-12" transform="translate(220.203125, 204)"><rect class="basic label-container" style="" rx="0" ry="0" x="-161.0703125" y="-17" width="322.140625" height="34"></rect><g class="label" style="" transform="translate(-153.5703125, -9.5)"><rect></rect><foreignobject width="307.140625" height="19"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Dispatcher forwards the response to Client</span></div></foreignobject></g></g></g></g></g><style>@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css");</style></svg>

<p>Load balancers distribute incoming client requests to computing resources such
as application servers and databases. In each case, the load balancer returns
the response from the computing resource to the appropriate client. Load
balancers are effective at:</p>

<ul>
  <li>Preventing requests from going to unhealthy servers</li>
  <li>Preventing overloading resources</li>
  <li>Helping to eliminate a single point of failure</li>
</ul>

<p>Load balancers can be implemented with hardware (expensive) or with software
such as HAProxy.</p>

<p>Additional benefits include:</p>

<ul>
  <li>
<strong>SSL termination</strong> - Decrypt incoming requests and encrypt server responses
so backend servers do not have to perform these potentially expensive
operations
    <ul>
      <li>Removes the need to install
<a href="https://en.wikipedia.org/wiki/X.509">X.509 certificates</a> on each server</li>
    </ul>
  </li>
  <li>
<strong>Session persistence</strong> - Issue cookies and route a specific clientâ€™s
requests to same instance if the web apps do not keep track of sessions</li>
</ul>

<p>To protect against failures, itâ€™s common to set up multiple load balancers,
either in <a href="/#active-passive">active-passive</a> or
<a href="/#active-active">active-active</a> mode.</p>

<p>Load balancers can route traffic based on various metrics, including:</p>

<ul>
  <li>Random</li>
  <li>Least loaded</li>
  <li>Session/cookies</li>
  <li><a href="https://www.g33kinfo.com/info/round-robin-vs-weighted-round-robin-lb">Round robin or weighted round robin</a></li>
  <li><a href="#layer-4-load-balancing">Layer 4</a></li>
  <li><a href="#layer-7-load-balancing">Layer 7</a></li>
</ul>

<h2 id="layer-4-load-balancing">Layer 4 load balancing</h2>

<p>Layer 4 load balancers look at info at the <a href="#communication">transport layer</a> to
decide how to distribute requests. Generally, this involves the source,
destination IP addresses, and ports in the header, but not the contents of the
packet. Layer 4 load balancers forward network packets to and from the upstream
server, performing
<a href="https://www.nginx.com/resources/glossary/layer-4-load-balancing/">Network Address Translation (NAT)</a>.</p>

<h2 id="layer-7-load-balancing">Layer 7 load balancing</h2>

<p>Layer 7 load balancers look at the <a href="#communication">application layer</a> to
decide how to distribute requests. This can involve contents of the header,
message, and cookies. Layer 7 load balancers terminate network traffic, reads
the message, makes a load-balancing decision, then opens a connection to the
selected server. For example, a layer 7 load balancer can direct video traffic
to servers that host videos while directing more sensitive user billing traffic
to security-hardened servers.</p>

<p>At the cost of flexibility, layer 4 load balancing requires less time and
computing resources than Layer 7, although the performance impact can be
minimal on modern commodity hardware.</p>

<h2 id="horizontal-scaling">Horizontal scaling</h2>

<p>Load balancers can also help with horizontal scaling, improving performance and
availability. Scaling out using commodity machines is more cost efficient and
results in higher availability than scaling up a single server on more
expensive hardware, called <strong>Vertical Scaling</strong>. It is also easier to hire for
talent working on commodity hardware than it is for specialized enterprise
systems.</p>

<h3 id="disadvantages-horizontal-scaling">Disadvantage(s): horizontal scaling</h3>

<ul>
  <li>Scaling horizontally introduces complexity and involves cloning servers
    <ul>
      <li>Servers should be stateless: they should not contain any user-related data like sessions or profile pictures</li>
      <li>Sessions can be stored in a centralized data store such as a <a href="/#database">database</a> (SQL, NoSQL) or a persistent <a href="/#cache">cache</a> (Redis, Memcached)</li>
    </ul>
  </li>
  <li>Downstream servers such as caches and databases need to handle more simultaneous connections as upstream servers scale out</li>
</ul>

<h2 id="disadvantages-load-balancer">Disadvantage(s): load balancer</h2>

<ul>
  <li>The load balancer can become a performance bottleneck if it does not have enough resources or if it is not configured properly.</li>
  <li>Introducing a load balancer to help eliminate a single point of failure results in increased complexity.</li>
  <li>A single load balancer is a single point of failure, configuring multiple load balancers further increases complexity.</li>
</ul>

<h2 id="sources-and-further-reading">Source(s) and further reading</h2>

<ul>
  <li><a href="https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/">NGINX architecture</a></li>
  <li><a href="http://www.haproxy.org/download/1.2/doc/architecture.txt">HAProxy architecture guide</a></li>
  <li><a href="http://www.lecloud.net/post/7295452622/scalability-for-dummies-part-1-clones">Scalability</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Load_balancing_(computing)">Wikipedia</a></li>
  <li><a href="https://www.nginx.com/resources/glossary/layer-4-load-balancing/">Layer 4 load balancing</a></li>
  <li><a href="https://www.nginx.com/resources/glossary/layer-7-load-balancing/">Layer 7 load balancing</a></li>
  <li><a href="http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-listener-config.html">ELB listener config</a></li>
</ul>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/system-design-primer/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">The System Design Primer</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">The System Design Primer</li>
<li><a class="u-email" href="mailto:phucknguyen@gmail.com">phucknguyen@gmail.com</a></li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list">
<li><a href="https://github.com/phucnguyen81"><svg class="svg-icon"><use xlink:href="/system-design-primer/assets/minima-social-icons.svg#github"></use></svg> <span class="username">phucnguyen81</span></a></li>
<li><a href="https://www.twitter.com/phucknguyen"><svg class="svg-icon"><use xlink:href="/system-design-primer/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">phucknguyen</span></a></li>
</ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Learn how to design large-scale systems. Prep for the system design interview.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
